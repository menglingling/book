<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器如何工作的 | 我的小书</title>
    <meta name="description" content="Just playing around.">
    <link rel="preload stylesheet" href="/book/assets/style.2fe8a051.css" as="style">
    <link rel="modulepreload" href="/book/assets/app.8056c9bd.js">
    <link rel="modulepreload" href="/book/assets/web_browser_browser.md.32107cec.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-93a960b4><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-93a960b4 data-v-0fa0e57d><div class="VPNavBar has-sidebar" data-v-0fa0e57d data-v-be450ad9><div class="container" data-v-be450ad9><div class="title" data-v-be450ad9><div class="VPNavBarTitle has-sidebar" data-v-be450ad9 data-v-6d2fb2d9><a class="title" href="/book/" data-v-6d2fb2d9><!--[--><!--]--><!--[--><img class="VPImage logo" src="/book/logo.png" alt data-v-6db2186b><!--]--><!--[-->我的小书<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-be450ad9><div class="curtain" data-v-be450ad9></div><div class="content-body" data-v-be450ad9><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-be450ad9 data-v-bdedfc22><span id="main-nav-aria-label" class="visually-hidden" data-v-bdedfc22>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-bdedfc22 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96001b6b><span class="text" data-v-96001b6b><!----> javascript <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96001b6b><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/book/javascript/data_type.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->javascript<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-bdedfc22 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96001b6b><span class="text" data-v-96001b6b><!----> other <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96001b6b><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/book/other/git.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->other<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-be450ad9 data-v-da3f667a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-da3f667a data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-be450ad9 data-v-66bb1f24 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-96001b6b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-96001b6b><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-66bb1f24><div class="item appearance" data-v-66bb1f24><p class="label" data-v-66bb1f24>Appearance</p><div class="appearance-action" data-v-66bb1f24><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-66bb1f24 data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-be450ad9 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-93a960b4 data-v-2817d72e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2817d72e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-2817d72e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-2817d72e>Menu</span></button><a class="top-link" href="#" data-v-2817d72e>Return to top</a></div><aside class="VPSidebar" data-v-93a960b4 data-v-c79ccefa><div class="curtain" data-v-c79ccefa></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c79ccefa><span class="visually-hidden" id="sidebar-aria-label" data-v-c79ccefa> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 has-active" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>web</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/web/browser/browser.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>浏览器如何工作的</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/web/performance/performance.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>web 性能</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>css</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/css/selector/selector.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>CSS选择器</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/css/bfc/bfc.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>BFC</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/css/center/center.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>居中</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/css/textOverflow/textOverflow.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>文本溢出</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/css/layout/layout.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>多栏布局</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/css/flex/flex.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>flex</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/css/relayout/relayout.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>重排</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>javascript</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/higherOrderFunction/higherOrderFunction.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>高阶函数</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/event_loop/event_loop.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>事件循环相关</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/event/event.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>浏览器的 event</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/execution_context/execution_context.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>执行上下文</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/this/this.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>JS中的this</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/data_type.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>数据类型</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/array.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>数组常用方法</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/string.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>字符串常用方法</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/type_convert.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>JavaScript 转换机制</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/equal.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>== 和 === 的区别</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/copy.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>深拷贝浅拷贝的区别</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/closure.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>闭包</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/scope.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>作用域</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/prototype.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>原型</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/createObj.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>JS创建对象的几种模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/inherit.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>继承的几种方式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/class.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>类</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/iteration.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>迭代器</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/generator.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>生成器</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/proxy/proxy.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>代理</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/reflect/reflect.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>反射</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/javascript/promise/promise.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>期约与异步函数</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>designPatterns</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/designPatterns/Iterator.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>迭代器模式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/designPatterns/proxy.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>代理模式</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>other</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/other/git.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>git</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/book/other/ssh.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ssh</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-93a960b4 data-v-0bd490fb><div class="VPDoc has-sidebar has-aside" data-v-0bd490fb data-v-c5936a1e><div class="container" data-v-c5936a1e><div class="aside" data-v-c5936a1e><div class="aside-curtain" data-v-c5936a1e></div><div class="aside-container" data-v-c5936a1e><div class="aside-content" data-v-c5936a1e><div class="VPDocAside" data-v-c5936a1e data-v-cdc66372><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-cdc66372 data-v-5dd9d5f6><div class="content" data-v-5dd9d5f6><div class="outline-marker" data-v-5dd9d5f6></div><div class="outline-title" data-v-5dd9d5f6>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-5dd9d5f6><span class="visually-hidden" id="doc-outline-aria-label" data-v-5dd9d5f6> Table of Contents for current page </span><ul class="root" data-v-5dd9d5f6 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cdc66372></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c5936a1e><div class="content-container" data-v-c5936a1e><!--[--><!--]--><main class="main" data-v-c5936a1e><div style="position:relative;" class="vp-doc _book_web_browser_browser" data-v-c5936a1e><div><h1 id="浏览器如何工作的" tabindex="-1">浏览器如何工作的 <a class="header-anchor" href="#浏览器如何工作的" aria-hidden="true">#</a></h1><p>用户希望：应用页面快速加载，交互流畅。</p><p>Web 性能的两个主要问题是：</p><ul><li>理解与延迟有关的问题</li><li>大多数情况下浏览器是单线程的事实有关的问题。</li></ul><p>当用户请求网站或应用程序时，为了填充浏览器，有一系列步骤，包括 DNS 查找、TCP 握手和 SSL 协商. 然后浏览器解析接收到的内容，构建 DOM、CSSOM、可访问性和渲染树，最终渲染页面。</p><h2 id="导航" tabindex="-1">导航 <a class="header-anchor" href="#导航" aria-hidden="true">#</a></h2><p>导航是加载网页的第一步。每当用户通过在地址栏中输入 URL、单击链接、提交表单以及其他操作来请求页面时，它就会发生。</p><h3 id="dns-查询-ip-地址服务器" tabindex="-1">DNS ，查询 IP 地址服务器 <a class="header-anchor" href="#dns-查询-ip-地址服务器" aria-hidden="true">#</a></h3><p>导航到网页的第一步是找到该页面的资产所在的位置。</p><p>DNS ：域名解析系统，通过网址查找到对应的 IP 地址服务器。</p><p>基本划分：根域名，顶级域名（cn,com）,二级...</p><p>基本步骤：</p><ul><li>1 递归查询找浏览器缓存的</li><li>2 找操作系统 host</li><li>3 找本地域名服务器</li><li>4 迭代查询远程根域名服务器</li><li>5 查询顶级域名服务器</li><li>6 查询权威域名服务器</li><li>7 本地域名服务器缓存迭代查询的结果 IP 地址</li><li>8 操作系统缓存</li><li>9 浏览器缓存</li></ul><h3 id="tcp-握手-确认服务器与客户端的收发能力" tabindex="-1">TCP 握手，确认服务器与客户端的收发能力 <a class="header-anchor" href="#tcp-握手-确认服务器与客户端的收发能力" aria-hidden="true">#</a></h3><p>一旦知道 IP 地址，浏览器就会通过 TCP 三向握手建立与服务器的连接。</p><p>三次握手：通过三次握手，就能确定双方的接收和发送能力是正常的。 <img src="/book/assets/s2022-11-16-15.49.51.8b332aa3.png" alt="img"></p><ul><li>第一次握手：客户端发送网络包，服务端收到了 这样服务端就能得出结论：客户端的发送能力、服务端的接收能力是正常的。</li><li>第二次握手：服务端发包，客户端收到了 这样客户端就能得出结论：服务端的接收、发送能力，客户端的接收、发送能力是正常的。不过此时服务器并不能确认客户端的接收能力是否正常</li><li>第三次握手：客户端发包，服务端收到了。 这样服务端就能得出结论：客户端的接收、发送能力正常，服务器自己的发送、接收能力也正常</li></ul><h3 id="tls-协商-https-建立安全的连接" tabindex="-1">TLS 协商，HTTPS 建立安全的连接 <a class="header-anchor" href="#tls-协商-https-建立安全的连接" aria-hidden="true">#</a></h3><p>通过 HTTPS 建立的安全连接,确定将使用哪种密码来加密通信、验证服务器并在开始实际数据传输之前建立安全连接。</p><p>在实际发送内容请求之前，这需要与服务器进行三次以上的往返。</p><h2 id="请求和响应" tabindex="-1">请求和响应 <a class="header-anchor" href="#请求和响应" aria-hidden="true">#</a></h2><p>一旦我们与 Web 服务器建立了连接，浏览器就会代表用户发送一个初始 HTTPGET 请求，对于网站来说，这通常是一个 HTML 文件。</p><p>一旦服务器收到请求，它会回复相关的响应头和 HTML 的内容。</p><h3 id="tcp-慢启动-14kb-规则" tabindex="-1">TCP 慢启动/14KB 规则 <a class="header-anchor" href="#tcp-慢启动-14kb-规则" aria-hidden="true">#</a></h3><p>第一个响应数据包将是 14KB。这是 TCP 慢启动的一部分，一种平衡网络连接速度的算法。慢启动逐渐增加传输的数据量，直到可以确定网络的最大带宽。</p><p>在 TCP 慢启动中，在收到初始数据包后，服务器将下一个数据包的大小加倍到 28KB 左右。后续数据包的大小会增加，直到达到预定阈值或出现拥塞。</p><p>如果您听说过初始页面加载的 14KB 规则，TCP 慢启动是初始响应为 14KB 的原因，也是 Web 性能优化要求针对初始 14KB 响应进行集中优化的原因。TCP 慢启动逐渐建立适合网络能力的传输速度以避免拥塞。</p><h2 id="解析" tabindex="-1">解析 <a class="header-anchor" href="#解析" aria-hidden="true">#</a></h2><p>一旦浏览器接收到第一块数据，它就可以开始解析接收到的信息。</p><p>解析是浏览器将其通过网络接收的数据转换为 DOM 和 CSSOM 的步骤，渲染器使用这些数据将页面绘制到屏幕上。</p><p>即使请求页面的 HTML 大于初始的 14KB 数据包，浏览器也会开始解析并尝试根据其拥有的数据呈现体验。这就是为什么在前 14 KB 中包含浏览器开始呈现页面所需的所有内容或至少包含页面模板（首次呈现所需的 CSS 和 HTML）对于 Web 性能优化很重要。但在将任何内容呈现到屏幕之前，必须解析 HTML、CSS 和 JavaScript。</p><h2 id="渲染" tabindex="-1">渲染 <a class="header-anchor" href="#渲染" aria-hidden="true">#</a></h2><h3 id="构建-dom-树" tabindex="-1">构建 DOM 树 <a class="header-anchor" href="#构建-dom-树" aria-hidden="true">#</a></h3><p>html 元素是文档树的第一个标记和根节点。DOM 节点的数量越多，构建 DOM 树所需的时间就越长。</p><p>当解析器找到非阻塞资源（例如图像）时，浏览器将请求这些资源并继续解析。</p><p>当遇到 CSS 文件时，解析可以继续。</p><p>当遇到 script 文件时，尤其是那些没有 async/defer 属性的标签会阻止渲染，并暂停 HTML 的解析。</p><p>尽管浏览器的预加载扫描器加快了这个过程，但过多的脚本仍然是一个重要的瓶颈。</p><h3 id="构建-cssom-树" tabindex="-1">构建 CSSOM 树 <a class="header-anchor" href="#构建-cssom-树" aria-hidden="true">#</a></h3><p>关键渲染路径的第二步是处理 CSS 和构建 CSSOM 树。</p><p>构建 CSSOM 非常非常快。</p><p>在当前的开发人员工具中不会以独特的颜色显示。相反，开发人员工具中的“重新计算样式”显示了解析 CSS、构建 CSSOM 树和递归计算计算样式所花费的总时间。</p><p>在 Web 性能优化方面，有更容易实现的成果，因为创建 CSSOM 的总时间通常少于一次 DNS 查找所需的时间。</p><h3 id="组合-dom-和-cssom-成渲染树" tabindex="-1">组合 DOM 和 CSSOM 成渲染树 <a class="header-anchor" href="#组合-dom-和-cssom-成渲染树" aria-hidden="true">#</a></h3><p>关键渲染路径的第三步是将 DOM 和 CSSOM 组合成渲染树。计算样式树或渲染树的构造从 DOM 树的根开始，遍历每个可见节点。</p><h3 id="布局" tabindex="-1">布局 <a class="header-anchor" href="#布局" aria-hidden="true">#</a></h3><p>关键渲染路径中的第四步是在渲染树上布局。</p><p>布局是<strong>初始</strong>确定渲染树中所有节点的<strong>大小和位置</strong>的过程。</p><p>重排是<strong>后续</strong>确定页面部分或整个文档的<strong>大小和位置</strong>的过程。</p><p>一旦构建了渲染树，布局就开始了。渲染树识别显示哪些节点（即使不可见）及其计算样式，但不识别每个节点的尺寸或位置。为了确定每个对象的确切大小和位置，浏览器从渲染树的根开始并遍历它。</p><p>布局一般从 body 开始，布局所有 body 的后代尺寸，每个元素的盒模型属性，为不知道尺寸的替换元素提供占位符空间，例如 image。</p><p>假设初始布局发生在返回图像之前。由于我们没有声明图像的大小，因此一旦知道图像大小就会进行重排（回流）。</p><h3 id="绘画" tabindex="-1">绘画 <a class="header-anchor" href="#绘画" aria-hidden="true">#</a></h3><p>关键渲染路径的最后一步是将各个节点用像素绘制到屏幕上。</p><p>绘画涉及将元素的每个视觉部分绘制到屏幕上，包括文本、颜色、边框、阴影和替换元素（如按钮和图像）。浏览器需要非常快速地完成这项工作。</p><p>为了确保流畅的滚动和动画，所有占用主线程的东西，包括计算样式，以及回流和绘制，都必须让浏览器在 16.67 毫秒内完成。</p><p>在 2048 X 1536 下，iPad 有超过 3,145,000 个像素要绘制到屏幕上。这是很多像素，必须非常快速地绘制。为了确保重绘可以比初始绘制更快地完成，屏幕上的绘图通常被分解成几层。如果发生这种情况，则需要进行合成。</p><p>绘画可以将布局树中的元素分解成层。</p><p>将内容提升到 GPU 上的层（而不是 CPU 上的主线程）可以提高绘制和重绘性能。</p><p>有一些特定的属性和元素可以实例化一个层，包括<code>&lt;video&gt;</code>和<code>&lt;canvas&gt;</code>，以及任何具有 CSS 属性 opacity3D transform、will-change 和其他一些元素的元素。这些节点将连同它们的后代一起绘制到它们自己的层上，除非后代出于上述一个（或多个）原因需要它自己的层。</p><p>层确实可以提高性能，但在内存管理方面代价高昂，因此不应将其过度用作 Web 性能优化策略的一部分。</p><h4 id="合成" tabindex="-1">合成 <a class="header-anchor" href="#合成" aria-hidden="true">#</a></h4><p>当文档的各个部分绘制在不同的层中并相互重叠时，合成是必要的，以确保它们以正确的顺序绘制到屏幕上并且内容被正确呈现。</p><p>随着页面继续加载资产，可能会发生回流（回想一下我们迟到的示例图像）。回流会引发重绘和重新合成。如果我们定义了图像的大小，就不需要回流，只有需要重绘的图层才会被重绘，并在必要时进行合成。但是我们没有包括图像大小！从服务器获取图像后，渲染过程返回到布局步骤并从那里重新开始。</p><h2 id="互动性" tabindex="-1">互动性 <a class="header-anchor" href="#互动性" aria-hidden="true">#</a></h2><p>主线程完成页面绘制后，您会认为我们“一切就绪”。不一定是这样。如果加载包括正确延迟的 JavaScript，并且仅在 onload 事件触发后执行，则主线程可能很忙，无法用于滚动、触摸和其他交互。</p><p>交互时间(TTI) 衡量的是从导致 DNS 查找和 SSL 连接的第一个请求到页面交互时所用的时间——交互是在第一次内容绘制之后页面响应时的时间点 50 毫秒内的用户交互。如果主线程忙于解析、编译和执行 JavaScript，则它不可用，因此无法及时（小于 50 毫秒）响应用户交互。</p><h2 id="参考文档" tabindex="-1">参考文档 <a class="header-anchor" href="#参考文档" aria-hidden="true">#</a></h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work" target="_blank" rel="noreferrer">MDN 浏览器如何工作的</a><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path" target="_blank" rel="noreferrer">MDN 浏览器渲染</a></p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-c5936a1e data-v-e033cd21><!----><div class="prev-next" data-v-e033cd21><div class="pager" data-v-e033cd21><!----></div><div class="pager" data-v-e033cd21><a class="pager-link next" href="/book/web/performance/performance.html" data-v-e033cd21><span class="desc" data-v-e033cd21>Next page</span><span class="title" data-v-e033cd21>web 性能</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"css_bfc_bfc.md\":\"c8205c19\",\"css_layout_layout.md\":\"455848a3\",\"css_relayout_relayout.md\":\"ad5bd52e\",\"css_selector_selector.md\":\"1422e70f\",\"css_textoverflow_textoverflow.md\":\"66df71aa\",\"english_event.md\":\"fe2aad94\",\"css_center_center.md\":\"096e8825\",\"css_flex_flex.md\":\"4e2f174d\",\"designpatterns_iterator.md\":\"181628c9\",\"english_call_stack.md\":\"1e3175cc\",\"javascript_copy.md\":\"b07d6ffa\",\"english_event_loop.md\":\"9196977f\",\"english_excution_context.md\":\"ffd47d91\",\"javascript_event_event.md\":\"ca3df530\",\"javascript_event_loop_event_loop.md\":\"251c43eb\",\"javascript_execution_context_execution_context.md\":\"8a37cfbf\",\"javascript_generator.md\":\"d5e4796a\",\"javascript_higherorderfunction_higherorderfunction.md\":\"6883cf66\",\"javascript_inherit.md\":\"f67a1aa7\",\"javascript_iteration.md\":\"5a0471f2\",\"javascript_operator_precedence_operator_precedence.md\":\"c866daf2\",\"javascript_prototype.md\":\"7347e6f2\",\"javascript_reflect_reflect.md\":\"70c4db80\",\"javascript_scope.md\":\"b83b2d89\",\"javascript_string.md\":\"90ce700c\",\"javascript_this_this.md\":\"87bb18a3\",\"javascript_type_convert.md\":\"39da0b82\",\"javascript_typeof_typeof.md\":\"da54e128\",\"other_git.md\":\"8699495a\",\"other_ssh.md\":\"b0c5b91b\",\"web_browser_browser.md\":\"32107cec\",\"web_performance_performance.md\":\"dfa48133\",\"javascript_equal.md\":\"03cecb64\",\"javascript_closure.md\":\"bda95c96\",\"javascript_data_type.md\":\"951c2b66\",\"javascript_createobj.md\":\"9c73b001\",\"designpatterns_proxy.md\":\"35d53f3f\",\"javascript_class.md\":\"0c1ed982\",\"index.md\":\"6dcbec69\",\"javascript_array.md\":\"8de5e89f\",\"javascript_debounce_debounce.md\":\"50b4a8b6\",\"javascript_promise_promise.md\":\"5985fe1f\",\"javascript_proxy_proxy.md\":\"084d0f74\"}")</script>
    <script type="module" async src="/book/assets/app.8056c9bd.js"></script>
    
  </body>
</html>